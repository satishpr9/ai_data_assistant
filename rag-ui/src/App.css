/* ==================== GLOBAL & LAYOUT ==================== */
.chatgpt-app {
  display: flex;
  height: 100vh;
  overflow: hidden;
  background-color: #212121;
  /* Slightly lighter dark for less contrast fatigue */
  color: #ececec;
  font-family: 'SÃ¶hne', 'ui-sans-serif', 'system-ui', -apple-system, 'Segoe UI', Roboto, Ubuntu, Cantarell, 'Noto Sans', sans-serif, 'Helvetica Neue', Arial, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
}

/* ==================== SIDEBAR ==================== */
.chatgpt-sidebar {
  width: 260px;
  background-color: #171717;
  display: flex;
  flex-direction: column;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  border-right: 1px solid rgba(255, 255, 255, 0.05);
  /* Softer border */
  flex-shrink: 0;
}

.chatgpt-sidebar.collapsed {
  margin-left: -260px;
  opacity: 0;
}

/* New Chat Button */
.new-chat-button {
  margin: 0.875rem;
  padding: 0.75rem 1rem;
  background-color: transparent;
  /* Clean look usually starts transparent or simple */
  border: 1px solid rgba(255, 255, 255, 0.2);
  color: white;
  border-radius: 0.375rem;
  /* Standard radius */
  display: flex;
  align-items: center;
  gap: 0.75rem;
  font-size: 0.875rem;
  font-weight: 400;
  cursor: pointer;
  transition: background 0.2s, border-color 0.2s;
  justify-content: flex-start;
  /* Align left usually looks better in sidebar */
}

.new-chat-button:hover {
  background-color: rgba(255, 255, 255, 0.05);
  border-color: rgba(255, 255, 255, 0.3);
}

/* Conversations List */
.conversations-scroll {
  flex: 1;
  overflow-y: auto;
  padding: 0 0.5rem;
}

.conversation-item {
  padding: 0.75rem;
  margin: 0.25rem 0.375rem;
  border-radius: 0.375rem;
  color: #c5c5d2;
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 0.75rem;
  transition: background-color 0.2s;
  font-size: 0.875rem;
  position: relative;
  overflow: hidden;
}

.conversation-item:hover,
.conversation-item.active {
  background-color: #2f2f2f;
  color: #fff;
}

.conv-title {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  flex: 1;
}

.delete-btn {
  opacity: 0;
  background: linear-gradient(90deg, transparent, #2f2f2f 20%);
  /* Fade in cover */
  border: none;
  color: #9ca3af;
  cursor: pointer;
  transition: opacity 0.2s, color 0.2s;
  padding: 4px;
  position: absolute;
  right: 0.5rem;
  top: 50%;
  transform: translateY(-50%);
}

.conversation-item:hover .delete-btn {
  opacity: 1;
}

.delete-btn:hover {
  color: #ef4444;
}


/* Sidebar Footer (User Profile) */
.sidebar-footer {
  padding: 1rem;
  border-top: 1px solid rgba(255, 255, 255, 0.05);
}

.user-profile {
  display: flex;
  align-items: center;
  gap: 0.75rem;
  padding: 0.75rem;
  border-radius: 0.375rem;
  cursor: pointer;
  transition: background 0.2s;
  color: white;
}

.user-profile:hover {
  background-color: #2f2f2f;
}

.user-avatar {
  width: 32px;
  height: 32px;
  border-radius: 4px;
  /* Slightly squared for modern feel */
  background: #3b82f6;
  /* Simple blue or use user image */
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: 500;
  font-size: 0.9rem;
  color: white;
}

.user-dropdown {
  position: absolute;
  bottom: 80px;
  left: 1rem;
  width: 240px;
  background-color: #2f2f2f;
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 0.5rem;
  padding: 0.25rem;
  box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.3);
  z-index: 20;
}

.user-dropdown button {
  width: 100%;
  text-align: left;
  background: none;
  border: none;
  padding: 0.625rem 0.75rem;
  color: #ececec;
  border-radius: 0.25rem;
  display: flex;
  gap: 0.5rem;
  align-items: center;
  font-size: 0.875rem;
}

.user-dropdown button:hover {
  background-color: rgba(255, 255, 255, 0.1);
}

/* ==================== MAIN CONTENT ==================== */
.chatgpt-main {
  flex: 1;
  display: flex;
  flex-direction: column;
  position: relative;
  background-color: #212121;
}

/* Header */
.chat-header {
  width: 100%;
  padding: 0.5rem 1rem;
  display: flex;
  align-items: center;
  z-index: 10;
  background: transparent;
  flex-shrink: 0;
}

.sidebar-toggle {
  background: transparent;
  border: none;
  color: #9ca3af;
  cursor: pointer;
  padding: 0.5rem;
  border-radius: 0.375rem;
  transition: background 0.2s, color 0.2s;
}

.sidebar-toggle:hover {
  background-color: rgba(255, 255, 255, 0.05);
  color: white;
}

.current-chat-title {
  margin-left: 0.5rem;
  font-weight: 500;
  color: #ececec;
  font-size: 0.9rem;
  opacity: 0.8;
}


/* Messages Container */
.messages-container {
  flex: 1;
  overflow-y: auto;
  padding: 0 0 10rem 0;
  /* Important: Bottom padding for floating input */
  display: flex;
  flex-direction: column;
  gap: 1.5rem;
  /* Nice gap between message groups */
  scroll-behavior: smooth;
}

/* Empty State */
.empty-state {
  flex: 1;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding-bottom: 8rem;
  color: white;
}

.empty-state h1 {
  font-size: 1.5rem;
  font-weight: 600;
  margin-bottom: 2rem;
  color: white;
}

.empty-icon {
  background: white;
  color: black;
  border-radius: 50%;
  padding: 0.75rem;
  margin-bottom: 1rem;
  display: flex;
}

/* ==================== MESSAGES (BUBBLES) ==================== */
.message-row {
  display: flex;
  gap: 1rem;
  max-width: 48rem;
  /* Equivalent to approx 768px - keep it readable */
  margin: 0 auto;
  width: 100%;
  padding: 1.5rem 1rem;
  /* Grouping padding */
  border-bottom: 1px solid transparent;
  /* Prepare for separator if needed */
}

/* Subtle separator for better reading rhythm */


.message-row.user {
  /* No reverse for generic chat style, keeping standard avatar-left flow is clearer often,
     but if we want "User right", sure. Let's keep "User Left" for clean consistency or "User Right" for typical msg app?
     The previous code had user reverse. Let's stick to standard "AI Chat" style: User Right is common for SMS,
     but ChatGPT has User Left. The previous implementation had user row-reverse. I'll respect that but clean it up.
  */
  flex-direction: row-reverse;
}

.message-avatar {
  flex-shrink: 0;
  width: 30px;
  height: 30px;
}

.user-avatar-small,
.ai-avatar,
.system-avatar {
  width: 100%;
  height: 100%;
  border-radius: 2px;
  /* ChatGPT style is squared */
  display: flex;
  align-items: center;
  justify-content: center;
}

.user-avatar-small {
  background-color: #555;
  /* Neutral */
  color: white;
  border-radius: 50%;
  /* Detect user easier with circle */
}

.ai-avatar {
  background-color: #10a37f;
  /* Brand color */
  color: white;
  border-radius: 50%;
}

.system-avatar {
  background: transparent;
  color: #9ca3af;
}

/* Message Bubbles */
.message-content {
  display: flex;
  flex-direction: column;
  max-width: 90%;
  gap: 0.25rem;
}

.message-text {
  padding: 0;
  /* Remove bubble padding for text-style chat */
  background: transparent;
  border-radius: 0;
  line-height: 1.75;
  font-size: 1rem;
  box-shadow: none;
  word-wrap: break-word;
  color: #ececec;
}

/* If user wants explicit bubbles for themselves */
.message-row.user .message-text {
  background-color: #2f2f2f;
  padding: 0.6rem 1rem;
  border-radius: 1.5rem;
  border-top-right-radius: 0.25rem;
  /* Speech bubble feel */
}



/* System Message */
.message-row.system {
  justify-content: center;
  padding: 0.5rem;
}

.message-row.system .message-text {
  background: transparent;
  border: none;
  font-size: 0.85rem;
  color: #6b7280;
  text-align: center;
}

/* ==================== INPUT AREA (FLOATING) ==================== */
.input-container {
  position: absolute;
  bottom: 0;
  left: 0;
  right: 0;
  padding: 1.5rem 1rem 2rem;
  /* More bottom padding */
  background: linear-gradient(180deg, rgba(33, 33, 33, 0) 0%, rgba(33, 33, 33, 1) 50%);
  display: flex;
  justify-content: center;
  flex-direction: column;
  align-items: center;
}

.input-form {
  width: 100%;
  max-width: 48rem;
  /* Match message width */
  position: relative;
  background-color: #2f2f2f;
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 0.75rem;
  /* Rounded rect */
  padding: 0.75rem;
  box-shadow: 0 0 15px rgba(0, 0, 0, 0.1);
  display: flex;
  align-items: flex-end;
  gap: 0.75rem;
  transition: border-color 0.2s, box-shadow 0.2s;
}

.input-form:focus-within {
  border-color: rgba(255, 255, 255, 0.3);
  box-shadow: 0 0 20px rgba(0, 0, 0, 0.2);
}

.message-input {
  flex: 1;
  background: transparent;
  border: none;
  outline: none;
  color: white;
  font-size: 1rem;
  resize: none;
  max-height: 200px;
  font-family: inherit;
  padding: 0.25rem 0;
  line-height: 1.5;
}

.message-input::placeholder {
  color: #8e8ea0;
}

.attach-btn,
.send-btn {
  background: transparent;
  border: none;
  color: #acacbe;
  padding: 0.25rem;
  border-radius: 0.25rem;
  cursor: pointer;
  transition: all 0.2s;
  display: flex;
  align-items: center;
  justify-content: center;
}

.attach-btn:hover {
  background-color: rgba(255, 255, 255, 0.1);
  color: white;
}

.send-btn.active {
  background-color: #10a37f;
  color: white;
  border-radius: 0.25rem;
  /* padding: 0.35rem; */
}

.send-btn:disabled {
  opacity: 0.5;
  cursor: default;
}

.upload-status {
  width: 100%;
  max-width: 48rem;
  margin-bottom: 0.5rem;
  text-align: center;
  font-size: 0.85rem;
  color: #10a37f;
  background: rgba(16, 163, 127, 0.1);
  padding: 0.5rem;
  border-radius: 0.5rem;
}

/* Scrollbars */
::-webkit-scrollbar {
  width: 8px;
}

::-webkit-scrollbar-track {
  background: transparent;
}

::-webkit-scrollbar-thumb {
  background-color: var(--bg-tertiary);
  border-radius: 20px;
}

::-webkit-scrollbar-thumb:hover {
  background-color: #555;
}

/* Animations */
@keyframes fadeIn {
  from {
    opacity: 0;
    transform: translateY(10px);
  }

  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@media (max-width: 768px) {
  .chatgpt-app {
    flex-direction: column;
  }

  /* Sidebar as Overlay */
  .chatgpt-sidebar {
    position: fixed;
    top: 0;
    left: 0;
    bottom: 0;
    width: 280px;
    z-index: 1000;
    transform: translateX(0);
    box-shadow: 2px 0 20px rgba(0, 0, 0, 0.5);
    background-color: #171717;
  }

  .chatgpt-sidebar.collapsed {
    transform: translateX(-100%);
    margin-left: 0;
    opacity: 1;
  }

  /* Main Content Full Width */
  .chatgpt-main {
    width: 100%;
    margin-left: 0;
  }

  /* Header adjustments */
  .chat-header {
    padding: 0.75rem;
    background-color: #212121;
    border-bottom: 1px solid rgba(255, 255, 255, 0.05);
  }

  .current-chat-title {
    font-size: 0.85rem;
    max-width: 200px;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  }

  /* Message Container */
  .messages-container {
    padding: 1rem 1rem 9rem;
    /* Reduced top padding as header is relative */
  }

  .message-row {
    padding: 0 0.5rem;
    gap: 0.75rem;
  }

  .message-avatar {
    width: 32px;
    height: 32px;
  }

  .message-text {
    padding: 0;
    font-size: 0.95rem;
  }

  /* Input Area */
  .input-container {
    padding: 1.5rem 1rem;
    background: linear-gradient(180deg, rgba(33, 33, 33, 0) 0%, rgba(33, 33, 33, 1) 30%);
    border-top: none;
  }

  .input-form {
    padding: 0.5rem 0.75rem;
    border-radius: 20px;
    background-color: #2f2f2f;
  }

  .attach-btn,
  .send-btn {
    padding: 0.4rem;
  }

  /* Admin controls on mobile */
  .admin-controls {
    padding: 0.75rem;
  }
}


/* Cursor Animation */
.cursor-blink {
  display: inline-block;
  width: 6px;
  height: 1.2em;
  background-color: var(--accent-color);
  margin-left: 2px;
  border-radius: 1px;
  animation: blink 1s step-end infinite;
  vertical-align: middle;
  opacity: 0.8;
}

@keyframes blink {

  0%,
  100% {
    opacity: 0.8;
  }

  50% {
    opacity: 0;
  }
}

/* Markdown Styles */
.markdown-answer {
  line-height: 1.6;
  font-size: 1rem;
}

.markdown-answer p {
  margin-bottom: 0.75rem;
}

.markdown-answer p:last-child {
  margin-bottom: 0;
}

.markdown-answer ul,
.markdown-answer ol {
  margin-left: 1.5rem;
  margin-bottom: 1rem;
  padding-left: 1rem;
}

.markdown-answer li {
  margin-bottom: 0.5rem;
  position: relative;
}

.markdown-answer li>ul,
.markdown-answer li>ol {
  margin-top: 0.5rem;
  margin-bottom: 0.5rem;
}

.markdown-answer strong {
  font-weight: 600;
  color: white;
}

/* Code Styles */
.code-block {
  background-color: #1e1e1e;
  border-radius: 6px;
  padding: 1rem;
  margin: 0.75rem 0;
  overflow-x: auto;
  border: 1px solid var(--border-light);
}

.code-block pre {
  margin: 0;
}

.code-block code {
  font-family: 'Fira Code', 'Consolas', monospace;
  font-size: 0.9em;
  color: #d4d4d4;
}

.inline-code {
  background-color: rgba(255, 255, 255, 0.1);
  padding: 2px 4px;
  border-radius: 4px;
  font-family: 'Fira Code', 'Consolas', monospace;
  font-size: 0.9em;
  color: #e0e0e0;
}

.markdown-answer table {
  width: 100%;
  border-collapse: collapse;
  margin: 1rem 0;
}

.markdown-answer th,
.markdown-answer td {
  border: 1px solid var(--border-light);
  padding: 0.5rem;
  text-align: left;
}

.markdown-answer th {
  background-color: rgba(255, 255, 255, 0.05);
  font-weight: 600;
}

/* ====================
   ADMIN CONTROLS
   ==================== */
.admin-controls {
  padding: 1rem;
  border-top: 1px solid var(--border-color);
  background-color: rgba(255, 0, 0, 0.05);
}

.admin-header {
  font-size: 0.75rem;
  text-transform: uppercase;
  color: var(--text-secondary);
  margin-bottom: 0.5rem;
  letter-spacing: 0.05em;
  font-weight: 600;
}

.admin-btn {
  width: 100%;
  display: flex;
  align-items: center;
  gap: 0.5rem;
  padding: 0.6rem;
  background-color: transparent;
  border: 1px solid var(--border-color);
  border-radius: 0.375rem;
  color: var(--text-primary);
  font-size: 0.875rem;
  cursor: pointer;
  transition: all 0.2s;
}

.admin-btn:hover {
  background-color: var(--bg-hover);
  border-color: var(--text-secondary);
}